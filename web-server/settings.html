<html>
    <head>
        <title>Skitter</title>
    </head>
    <body>
        <link rel='stylesheet' href='CSS/set.css'>
        <div class='topBar'>
            <form id='search' action='' method=''>
                <img src='img/Logo.png' height='30'/>
                <img src='img/Skitter.png' height='25'/>
                <div class='center'>
                    <input name='search' type='text' placeholder='search'>
                </div>
                <img src='img/Account.png' height='30' align='right'/>
                <img src='img/settings.png' height='25'align='right'/>
            </form>
        </div>
        <div class='settings'>
            <p>Change Display Name</p>
            <form class='setForm' id='DisplayName' action='/php/changeDisplayName.php' method='get'>
                <input class='textField' id='display_name' type='text' placeholder='New Display Name' required>
                <button type='button' onclick="display(document.getElementById('display_name').value);">submit</button>
                <p id='displayChangeResponse'></p>
            </form>
        </div>
        <div class='settings'>
            <p>Change Email</p>
            <form id='EmailForm' class='setForm'>
                <input class='textField' id='Email' type='text' placeholder='New Email' required>
                <button type='button' onclick="emailChange(document.getElementById('Email').value);">submit</button>
                <p id='emailChangeResponse'></p>
            </form>
        </div>
        <div class='settings'>
            <p>Change profile Picture</p>
            <form id='picture' class='setForm'>
                <input id='pic' type='file' placeholder='New pic' required>
                <button type='button' onclick="picChange(document.getElementById('pic').files[0]);">submit</button>
                <p id='picChangeResponse'></p>
            </form>
        </div>

        <script>

function display(display_name){
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            if(!~this.responseText.indexOf("index.html")){
                window.location = "../index.html";
            }else{
                document.getElementById("displayChangeResponse").innerHTML = this.responseText;
            }
        }
    };
    xhttp.open("GET", "php/changeDisplayName.php?display_name="+display_name, true);
    xhttp.send();
}
function emailChange(email){
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            if(!~this.responseText.indexOf("index.html")){
                window.location = "../index.html";
            }else{
                document.getElementById("emailChangeResponse").innerHTML = this.responseText;
            }
        }
    };
    xhttp.open("GET", "php/changeEmail.php?email="+email, true);
    xhttp.send();
}
function picChange(img){
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            if(!~this.responseText.indexOf("index.html")){
                window.location = "../index.html";
            }else{
                document.getElementById("picChangeResponse").innerHTML = this.responseText;
            }
        }
    };
    xhttp.open("POST", "php/changeProfileImage.php", true);
    var formData = new FormData();
    formData.append("myimage", img);
    xhttp.send(formData);
}

        </script>
    </body>
</html>

